<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="../Css/navbar.css">
    <link rel="stylesheet" href="../Css/cadastro_login.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo">Composição</div>
        <ul class="nav-links">
            <li> <a href="home.html">Home</a> </li>
            <li> <a href="beneficos.html">Beneficios</a> </li>
            <li> <a href="contribuicao.html">Contribuição</a> </li>
            <li> <a href="videos.html">Videos</a> </li>
        </ul>
        <div class="auth-links">
            <a href="login.html" class="button-login">Login</a>
            <a href="cadastro.html" class="button-cadastro">Cadastro</a>
        </div>
    </nav>

    <div class="pai"> 
        <div class="principal">
            <section class="formulario">
                <h1>Cadastre-se</h1>

                <div class="campo">
                    <span>Nome de Usuário:</span>
                    <input id="ipt_usuario" type="text" placeholder="Enzo" />
                </div>

                <div class="campo">
                    <span>E-mail:</span>
                    <input id="ipt_email" type="text" placeholder="enzo.servilha@sptech.school" />
                </div>

                <div class="campo">
                    <span>Senha:</span>
                    <input id="ipt_senha" type="password" placeholder="*******" />
                </div>

                <div class="campo">
                    <span>Confirmação da Senha:</span>
                    <input id="ipt_confirmacaoSenha" type="password" placeholder="*******" />
                </div>

                <div class="acao">
                    <a href="login.html">Já tem cadastro? Entrar</a>
                     <button onclick="verificacaoCadastro()" class="botao_cadastro_login">Registrar-se</button>
                </div>

                <div id="div_resposta" style="margin-top:1em; color:#c00;"></div>
            </section> 
        </div>
    </div>

</body>
<script>
    
    let qtd_tentativa = 20
    
        function verificacaoCadastro(){
          var nomeUsuario = ipt_usuario.value
          var email = ipt_email.value
          var senha = ipt_senha.value
          var confirmarSenha = ipt_confirmacaoSenha.value 
          const regraEmail = ['@','.', '#', '$', '%', '&', '*', '(', ')']
          const CaracterEspeciais = ['!', '@', '#', '$', '%', '&', '*', '(', ')']
          var resposta = ''
       
         if(nomeUsuario === '')
          {
            resposta = 'Por favor, insira um nome.'
          } 
          else if (email === '') 
          {
            resposta = 'Por favor, insira algum Email.'
          }
          else if (senha === '') 
          {
            resposta = 'Por favor, insira alguma senha'
          } 
          else if(confirmarSenha === '')
          {
            resposta = 'Por Favor, confirme a sua senha.'
          } 
          else if (qtd_tentativa <= 0) 
          {
            resposta = 'As suas tentativas acabaram. <br> Tente novamente mais tarde.'
          } 
     else {
          for (var i = 0; i < 1; i++) 
            {
              if(nomeUsuario.length > 20)
              {
                qtd_tentativa--
                resposta = 'Nome de usuário grande demais.<br><br>O nome deve conter no máximo 20 caracteres.'
    
              } 
              else if(!email.includes('@') && !email.includes('.'))
              {
                qtd_tentativa--
                resposta = 'Email Inválido.'
    
              } 
              else if(senha.length < 8 || senha.length > 120 || !CaracterEspeciais.some(char => senha.includes(char)))
              {
                qtd_tentativa--
                resposta = 'Senha inválida.<br><br>Deve ficar entre 8 e 120 caracteres e conter ao menos um especial.'
    
              }
              else if(confirmarSenha != senha)
              {
                resposta = 'A confirmação da sua senha não está igual a sua senha'
    
              } 
              else 
              {
                resposta = `<span style="color: green;">Parabéns ${nomeUsuario}, Cadastro válido!</span>`
                qtd_tentativa = 0; // se o login for valido, isso vai bloquear fazer outro
                window.location.href = "login.html"; // redireciona para a página inicial
              }
            }
          }
      
          document.getElementById('div_resposta').innerHTML = resposta
        }
    


</script>
</html>